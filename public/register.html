<!DOCTYPE html>
<html lang="zh-tw">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title id="title"></title>
    <link rel="icon" href="/favicon.png" />
</head>

<body id="content">
    <button id="back" onclick="history.back()">
        <!-- <img src="/assets/back.svg" /> -->
    </button>
    <button id="home" onclick="window.location.href='/home'">
        <!-- <img src="/assets/home.svg" />  -->
    </button>
    <form id="registerForm" class="register">
        <h3>Register 註冊</h3>
        <input class="text_field" type="text" name="username" placeholder="Username 使用者名稱" required/>
        <input class="text_field" type="password" name="password" placeholder="Password 密碼" required/>
        <input class="text_field" type="email" name="email" placeholder="Email 電子郵件" required/>
        <input class="button" type="submit" value="Submit 提交" />

    </form>
    <script>
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault(); // 阻止表單預設提交行為

            errorMsg.textContent = ''; // 清空錯誤訊息

            const data = {
                username: document.getElementById('registerForm').username.value,
                password: document.getElementById('registerForm').password.value,
                email: document.getElementById('registerForm').email.value
            };

            try {
                const res = await fetch('/registering', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await res.json();

                if (res.ok && result.success) {
                    // 登入成功，導向主頁或其他頁面
                    window.location.href = '/dashboard'; // 依實際需求修改
                } else {
                    // 顯示錯誤訊息
                    document.getElementById('errorMsg').textContent = result.message || '註冊失敗';
                }
            } catch (error) {
                document.getElementById('errorMsg').textContent = '網路錯誤，請稍後再試';
                console.error(error);
            }
        });
    </script>
    <style>
        @import '~lucide-static/font/Lucide.css';
        @import url("/template/font.css");

        form input {
            display: block;
            margin: 20px auto;
            text-align: center;
            background-color: #00000000;
            border: black solid 2px;
            padding: 12px;
            font-size: 15px;
            outline: none;
            align-self: center;

            background-size: 100% 100%;
            background-repeat: no-repeat;
        }

        form .text_field {
            background-image: url(/assets/text_field_disabled.png);
        }

        form .text_field:focus {
            background-image: url(/assets/text_field.png);
        }

        form .button {
            background-image: url(/assets/button.png);
        }

        form .button:focus {
            background-image: url(/assets/button_highlighted.png);
        }

        form .button:hover {
            background-image: url(/assets/button_highlighted.png);
        }

        form .button:disabled {
            background-image: url(/assets/button_disabled.png);
        }

        #content {
            font-family: Roboto;
            background-color: rgb(128, 76, 34);
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vb;
            margin: 0px;
        }

        #content button {
            height: 50px;
            width: 50px;
        }

        #content button {
            background-size: 100% 100%;
            background-repeat: no-repeat;
        }

        #content #back {
            background-image: url(/assets/back.svg);
        }

        #content #home {
            background-image: url(/assets/home.svg);
        }

        #back {
            position: fixed;
            left: 10px;
            top: 10px;
            background: unset;
            border: unset;
            color: white;
            height: 50px;
            width: 50px;
            font-size: 25pt;
        }

        :hover #back {
            cursor: pointer;
        }

        #home {
            position: fixed;
            left: 70px;
            top: 10px;
            background: unset;
            border: unset;
            color: white;
            height: 50px;
            width: 50px;
            font-size: 25pt;
        }

        :hover #home {
            cursor: pointer;
        }

        .register {
            background-color: rgb(169, 169, 169);
            width: 400px;
            color: white;
            padding: 40px;
            box-shadow: -5px -5px 1px rgb(199, 199, 199);
            text-align: center;
            border: rgb(76, 76, 76) solid 5px;
            align-content: center;
            background-image: image();

        }

        /* .login input{
                display: block;
                margin: 20px auto;
                text-align: center;
                background-color: #00000000;
                padding: 12px;
                font-size: 15px;
                border-radius: 5px;
                outline: none;
            }

            .login input[type="text"], .login input[type="password"]{
                border: 2px solid rgb(73, 199, 216);
                width: 220px;
                transition: 0.25s;
            }

            .login input[type="text"]:focus, .login input[type="password"]:focus{
                border-color:rgb(0, 224, 253);
                width: 250px;
                transition: 0.25s;
            }

            .login input[type="submit"]{
                width: 150ps;
                border: 2px solid rgb(62, 184, 62);
                cursor: pointer;
            }

            .login input[type="submit"]:hover{
                background-color: rgb(255, 238, 0);
                transition: 0.5s;
            } */

        * {
            font-family: minecraft;
        }
    </style>
</body>

</html>